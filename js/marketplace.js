let data = [
    {
        name: 'Modern Gated Mansion',
        images: ['img/marketplace/block1/1.jpg', 'img/marketplace/block1/2.jpg',
            'img/marketplace/block1/3.jpg', 'img/marketplace/block1/4.jpg',
            'img/marketplace/block1/5.jpg', 'img/marketplace/block1/6.jpg',
            'img/marketplace/block1/7.jpg', 'img/marketplace/block1/8.jpg',
            'img/marketplace/block1/9.jpg', 'img/marketplace/block1/10.jpg',
            'img/marketplace/block1/11.jpg', 'img/marketplace/block1/12.jpg',
            'img/marketplace/block1/13.jpg', 'img/marketplace/block1/14.jpg',
            'img/marketplace/block1/15.jpg', 'img/marketplace/block1/16.jpg',
            'img/marketplace/block1/17.jpg'],
        address: '0x07...b98'
    },
    {
        name: 'WATCH BALL DROP!! TIME SQUARE VIEWS!! 38TH FLOOR!!',
        images: ['img/marketplace/block2/1.jpg', 'img/marketplace/block2/2.jpg',
            'img/marketplace/block2/3.jpg', 'img/marketplace/block2/4.jpg',
            'img/marketplace/block2/5.jpg', 'img/marketplace/block2/6.jpg',
            'img/marketplace/block2/7.jpg', 'img/marketplace/block2/8.jpg',
            'img/marketplace/block2/9.jpg', 'img/marketplace/block2/10.jpg',
            'img/marketplace/block2/11.jpg', 'img/marketplace/block2/12.jpg',
            'img/marketplace/block2/13.jpg', 'img/marketplace/block2/14.jpg',
            'img/marketplace/block2/15.jpg', 'img/marketplace/block2/16.jpg',
            'img/marketplace/block2/17.jpg'],
        address: 'Times Square, West 44th Street, Times Square, Theater District, Manhattan Community Board 5, Manhattan, New York County, New York, 10036, United States of America'
    },
    {
        name: 'Stunning Water Front Home',
        images: ['img/marketplace/block3/1.jpg', 'img/marketplace/block3/2.jpg',
            'img/marketplace/block3/3.jpg', 'img/marketplace/block3/4.jpg',
            'img/marketplace/block3/5.jpg', 'img/marketplace/block3/6.jpg',
            'img/marketplace/block3/7.jpg', 'img/marketplace/block3/8.jpg',
            'img/marketplace/block3/9.jpg', 'img/marketplace/block3/10.jpg'
        ],
        address: '0x07...b98'
    },
    {
        name: 'Cozy Private Town home',
        images: ['img/marketplace/block4/1.jpg', 'img/marketplace/block4/2.jpg',
            'img/marketplace/block4/3.jpg', 'img/marketplace/block4/4.jpg',
            'img/marketplace/block4/5.jpg', 'img/marketplace/block4/6.jpg',
            'img/marketplace/block4/7.jpg', 'img/marketplace/block4/8.jpg'
        ],
        address: '0x07...b98'
    },
    {
        name: 'Spacious Designer Penthouse Views',
        images: ['img/marketplace/block5/1.jpg', 'img/marketplace/block5/2.jpg',
            'img/marketplace/block5/3.jpg', 'img/marketplace/block5/4.jpg',
            'img/marketplace/block5/5.jpg', 'img/marketplace/block5/6.jpg',
            'img/marketplace/block5/7.jpg', 'img/marketplace/block5/8.jpg',
            'img/marketplace/block5/9.jpg', 'img/marketplace/block5/10.jpg',
            'img/marketplace/block5/11.jpg', 'img/marketplace/block5/12.jpg',
            'img/marketplace/block5/13.jpg', 'img/marketplace/block5/14.jpg',
            'img/marketplace/block5/15.jpg', 'img/marketplace/block5/16.jpg',
            'img/marketplace/block5/17.jpg', 'img/marketplace/block5/18.jpg'],
        address: 'Burlingame Island, Miami, Miami-Dade County, Florida, 33131, United States'
    },
    {
        name: 'Beach Pad Get-Away',
        images: ['img/marketplace/block6/1.jpg', 'img/marketplace/block6/2.jpg',
            'img/marketplace/block6/3.jpg', 'img/marketplace/block6/4.jpg',
            'img/marketplace/block6/5.jpg'],
        address: 'Bayfront Park, Biscayne Boulevard, Miami, Miami-Dade County, Florida, 33131, United States of America'
    },
    {
        name: 'Private Mansion Oasis in the Jungle',
        images: ['img/marketplace/block7/1.jpg', 'img/marketplace/block7/2.jpg',
            'img/marketplace/block7/3.jpg', 'img/marketplace/block7/4.jpg',
            'img/marketplace/block7/5.jpg', 'img/marketplace/block7/6.jpg',
            'img/marketplace/block7/7.jpg', 'img/marketplace/block7/8.jpg',
            'img/marketplace/block7/9.jpg', 'img/marketplace/block7/10.jpg',
            'img/marketplace/block7/11.jpg', 'img/marketplace/block7/12.jpg',
            'img/marketplace/block7/13.jpg', 'img/marketplace/block7/14.jpg',
            'img/marketplace/block7/15.jpg', 'img/marketplace/block7/16.jpg'
        ],
        address: ''
    },
    {
        name: 'Full Kitchen, Heated Pool, Gym, Private Bathroom',
        images: ['img/marketplace/block8/1.jpg', 'img/marketplace/block8/2.jpg',
            'img/marketplace/block8/3.jpg', 'img/marketplace/block8/4.jpg',
            'img/marketplace/block8/5.jpg', 'img/marketplace/block8/6.jpg',
            'img/marketplace/block8/7.jpg', 'img/marketplace/block8/8.jpg',
            'img/marketplace/block8/9.jpg', 'img/marketplace/block8/10.jpg',
            'img/marketplace/block8/11.jpg', 'img/marketplace/block8/12.jpg',
            'img/marketplace/block8/13.jpg', 'img/marketplace/block8/14.jpg',
            'img/marketplace/block8/15.jpg', 'img/marketplace/block8/16.jpg',
            'img/marketplace/block8/17.jpg', 'img/marketplace/block8/18.jpg'],
        address: 'Financial Plaza, Fort Lauderdale, Broward County, Florida, 33394, United States'
    },
    {
        name: '2 Story, Gated, Full Kitchen, Big Pool, Parking',
        images: ['img/marketplace/block9/1.jpg', 'img/marketplace/block9/2.jpg',
            'img/marketplace/block9/3.jpg', 'img/marketplace/block9/4.jpg',
            'img/marketplace/block9/5.jpg', 'img/marketplace/block9/6.jpg',
            'img/marketplace/block9/7.jpg', 'img/marketplace/block9/8.jpg',
            'img/marketplace/block9/9.jpg', 'img/marketplace/block9/10.jpg',
            'img/marketplace/block9/11.jpg', 'img/marketplace/block9/12.jpg',
            'img/marketplace/block9/13.jpg', 'img/marketplace/block9/14.jpg',
            'img/marketplace/block9/15.jpg', 'img/marketplace/block9/16.jpg',
            'img/marketplace/block9/17.jpg', 'img/marketplace/block9/18.jpg'],
        address: 'Country Club, Miami-Dade County, Florida, 33015, United States'
    },
    {
        name: 'Paradise awaits you! Relax & enjoy the serene view',
        images: ['img/marketplace/block10/1.jpg', 'img/marketplace/block10/2.jpg',
            'img/marketplace/block10/3.jpg', 'img/marketplace/block10/4.jpg',
            'img/marketplace/block10/5.jpg', 'img/marketplace/block10/6.jpg',
            'img/marketplace/block10/7.jpg', 'img/marketplace/block10/8.jpg',
            'img/marketplace/block10/9.jpg', 'img/marketplace/block10/10.jpg',
            'img/marketplace/block10/11.jpg', 'img/marketplace/block10/12.jpg',
            'img/marketplace/block10/13.jpg', 'img/marketplace/block10/14.jpg',
            'img/marketplace/block10/15.jpg', 'img/marketplace/block10/16.jpg'
        ],
        address: ''
    },
    {
        name: 'South Miami Oasis',
        images: ['img/marketplace/block11/1.jpg', 'img/marketplace/block11/2.jpg',
            'img/marketplace/block11/3.jpg', 'img/marketplace/block11/4.jpg',
            'img/marketplace/block11/5.jpg', 'img/marketplace/block11/6.jpg',
            'img/marketplace/block11/7.jpg', 'img/marketplace/block11/8.jpg',
            'img/marketplace/block11/9.jpg', 'img/marketplace/block11/10.jpg',
            'img/marketplace/block11/11.jpg', 'img/marketplace/block11/12.jpg',
            'img/marketplace/block11/13.jpg', 'img/marketplace/block11/14.jpg',
            'img/marketplace/block11/15.jpg', 'img/marketplace/block11/16.jpg',
            'img/marketplace/block11/17.jpg', 'img/marketplace/block11/18.jpg'],
        address: 'Royal Road, Dinner Key, Miami, Miami-Dade County, Florida, 33133, United States'
    },
    {
        name: 'Highest Penthouse View In All Miami',
        images: ['img/marketplace/block12/1.jpg', 'img/marketplace/block12/2.jpg',
            'img/marketplace/block12/3.jpg', 'img/marketplace/block12/4.jpg',
            'img/marketplace/block12/5.jpg', 'img/marketplace/block12/6.jpg',
            'img/marketplace/block12/7.jpg', 'img/marketplace/block12/8.jpg',
            'img/marketplace/block12/9.jpg', 'img/marketplace/block12/10.jpg',
            'img/marketplace/block12/11.jpg', 'img/marketplace/block12/12.jpg',
            'img/marketplace/block12/13.jpg', 'img/marketplace/block12/14.jpg',
            'img/marketplace/block12/15.jpg', 'img/marketplace/block12/16.jpg'
        ],
        address: 'Burlingame Island, Miami, Miami-Dade County, Florida, 33131, United States'
    },
    {
        name: 'Mansion in Northern Miami',
        images: ['img/marketplace/block13/1.jpg', 'img/marketplace/block13/2.jpg',
            'img/marketplace/block13/3.jpg', 'img/marketplace/block13/4.jpg',
            'img/marketplace/block13/5.jpg', 'img/marketplace/block13/6.jpg',
            'img/marketplace/block13/7.jpg', 'img/marketplace/block13/8.jpg',
            'img/marketplace/block13/9.jpg', 'img/marketplace/block13/10.jpg',
            'img/marketplace/block13/11.jpg', 'img/marketplace/block13/12.jpg',
            'img/marketplace/block13/13.jpg', 'img/marketplace/block13/14.jpg',
            'img/marketplace/block13/15.jpg', 'img/marketplace/block13/16.jpg',
            'img/marketplace/block13/17.jpg', 'img/marketplace/block13/18.jpg',
            'img/marketplace/block13/19.jpg', 'img/marketplace/block13/20.jpg'
        ],
        address: 'Eastern Shores, Miami-Dade County, Florida, 33160, United States'
    },
    {
        name: 'Gated Mansion Paradise',
        images: ['img/marketplace/block14/1.jpg', 'img/marketplace/block14/2.jpg',
            'img/marketplace/block14/3.jpg', 'img/marketplace/block14/4.jpg',
            'img/marketplace/block14/5.jpg', 'img/marketplace/block14/6.jpg',
            'img/marketplace/block14/7.jpg', 'img/marketplace/block14/8.jpg',
            'img/marketplace/block14/9.jpg', 'img/marketplace/block14/10.jpg',
            'img/marketplace/block14/11.jpg', 'img/marketplace/block14/12.jpg',
            'img/marketplace/block14/13.jpg', 'img/marketplace/block14/14.jpg',
            'img/marketplace/block14/15.jpg', 'img/marketplace/block14/16.jpg',
            'img/marketplace/block14/17.jpg', 'img/marketplace/block14/18.jpg',
            'img/marketplace/block14/19.jpg', 'img/marketplace/block14/20.jpg',
            'img/marketplace/block14/21.jpg', 'img/marketplace/block14/22.jpg'
        ],
        address: 'Golden Glades, Miami-Dade County, Florida, 33163, United States'
    },
    {
        name: 'Butterfly Pool House',
        images: ['img/marketplace/block15/1.jpg', 'img/marketplace/block15/2.jpg',
            'img/marketplace/block15/3.jpg', 'img/marketplace/block15/4.jpg',
            'img/marketplace/block15/5.jpg', 'img/marketplace/block15/6.jpg',
            'img/marketplace/block15/7.jpg', 'img/marketplace/block15/8.jpg',
            'img/marketplace/block15/9.jpg', 'img/marketplace/block15/10.jpg',
            'img/marketplace/block15/11.jpg', 'img/marketplace/block15/12.jpg',
            'img/marketplace/block15/13.jpg', 'img/marketplace/block15/14.jpg',
            'img/marketplace/block15/15.jpg', 'img/marketplace/block15/16.jpg',
            'img/marketplace/block15/17.jpg', 'img/marketplace/block15/18.jpg',
            'img/marketplace/block15/19.jpg', 'img/marketplace/block15/20.jpg',
            'img/marketplace/block15/21.jpg', 'img/marketplace/block15/22.jpg'
        ],
        address: 'Golden Glades, North Miami Beach, Miami-Dade County, Florida, 33162, United States'
    }
];

let mp_root = document.getElementById('mp-root');

//the carousel item creating
let carouselItem = (arr) => {
    let res = '';
    arr.forEach(src => {
        res += `<div class="item">
           <div class="overlay"></div>
            <img src="${src}">
            </div>`
    });
    return res;
};

// one block item creating
let templateCreator = (blockItem) => {
    return `<div class="col-lg-6 mt-4">
                    <div class="m-item">
                        <div class="row mb-3">
                            <div class="col-12">
                                <div class="token-header">
                                    ${blockItem.name}
                                </div>
                            </div>
                            <div class="col-md-2 col-12 mb-2">
                                <div class="embed">
                                    embed
                                </div>
                            </div>
                            <div class="col-md-10 col-12 mb-2 token-url">
                                <div class="zap-url">
                                    zap-bond-widget address=”0xD5E175E
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="m-carousel">
                                    <div class="owl-carousel">
                                       ${carouselItem(blockItem.images)}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 col-12 mb-md-0 mb-3" >
                                <div class="graph-block">
                                    <canvas style="display: block; width: 347px; height: 173px;" width="347"
                                            height="173" class="chartjs-render-monitor"></canvas>
                                </div>
                            </div>
                            <div class="col-md-6 col-12 ">
                                <div class="heading-2">
                                    Hackathon Factory T4
                                </div>
                                <div class="line">
                                    <span class="sizing">DOTs issued</span>
                                    <span class="pricing">0</span>
                                </div>
                                <div class="line">
                                    <span class="sizing">DOTs bound</span>
                                    <span class="pricing">0</span>
                                </div>
                                <div class="zap-count mt-2">
                                    1
                                </div>
                            </div>
                        </div>
                        <div class="row mt-3 mb-3">
                            <div class="col-6">
                                <div class="line">
                                    <span class="sizing">Address: </span>
                                    <span class="pricing">${blockItem.address}</span>
                                </div>
                                <div class="line">
                                    <span class="pricing">
                                        0 wel Zap
                                    </span>
                                </div>
                                <div class="line">
                                    <span class="pricing">
                                        0.011 ETH
                                    </span>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="line">
                                    <span class="pricing">
                                        10000 gwel ZAP needed
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 d-flex flex-wrap justify-content-md-between justify-content-start">
                                <a class="buy-btn mb-2 mr-1">
                                    Approve
                                </a>
                                <a class="buy-btn mb-2 mr-1">
                                    Bond
                                </a>
                                <a class="buy-btn mb-2 mr-1">
                                    Approve to bond
                                </a>
                                <a class="buy-btn mb-2 mr-1">
                                    Unbond
                                </a>
                            </div>
                        </div>
                    </div>
                </div>`
}

//creating pagination
let startpage = 1;
let blocksCount = data.length;
let itemPerPage = 12;
let pagesCount = Math.ceil(blocksCount / itemPerPage);


let Pagination = () => {
    let res = '';
    for (let i = 1; i <= pagesCount; i++) {
        res += `<li page="${i}" class="page-item ${i === 1 ? 'active' : ''}">
                                <a class="page-link" href="#" tabindex="-1">${i}</a>
                            </li>`
    }
    return res;
};
document.getElementById('mp-pagination').innerHTML = Pagination();

//initializing marketplace content function
function Init(arr) {
    let showData = arr.slice((startpage - 1) * itemPerPage, startpage * itemPerPage);
    let res = '';
    showData.forEach(block => {
        res += templateCreator(block)
    });
    mp_root.innerHTML = res;

    $('.owl-carousel').owlCarousel({
        items: 1,
        loop: true,
        margin: 30,
        responsiveClass: true,
        dotsEach: 1,

    });

    var collection = document.querySelectorAll('.graph-block canvas');
    var lineChartData = {
        elements: {
            line: {
                tension: 1,
            },
        },
        labels: ['2020', '2030', '2040', '2050', '2060', '2070', '2080'],
        fontSize: 12,
        datasets: [{
            lineTension: '0.3',
            label: 'My First dataset',
            borderColor: 'rgba(85, 126, 190, 0.95)',
            borderWidth: 2,
            backgroundColor: 'transparent',
            pointBackgroundColor: '#557EBE',
            pointBorderColor: '#557EBE',
            pointRadius: 2,
            fill: true,

            data: [
                0, 1.25, 1, 3, 3, 3.75, 5
            ],
            yAxisID: 'y-axis-1',
        }]
    };
    var options = {
        legend: false,
        responsive: true,
        hoverMode: 'index',
        stacked: false,
        scales: {
            yAxes: [{
                type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
                display: true,
                position: 'left',
                id: 'y-axis-1',
            }],
            xAxes: [
                {
                    display: true,
                    gridLines: {
                        color: "rgba(0, 0, 0, 0)",
                    },
                }
            ]
        },
    }

    for(let i = 0; i < collection.length; i++) {
        let ctx = collection[i].getContext('2d');
        var gradientStroke = ctx.createLinearGradient(500, 0, 100, 0);
        gradientStroke.addColorStop(0, "#80b6f4");
        gradientStroke.addColorStop(1, "#f49080");
        window.myLine = Chart.Line(ctx, {
            data: lineChartData,
            options: options
        });
    }
}

//initializing first page call
Init(data);

//pagination click function
$('.page-item').click(function () {
    if($(this).attr('page') == startpage) return;
    $('.page-item.active').removeClass('active');
    $(this).addClass('active');
    startpage = parseInt($(this).attr('page'));
    Init(data)
});